<%= render layout: "messages/step_layout", locals: { current_step: 3, title: "相手の印象は？", subtitle: "相手に対する印象を選んでください。（複数選択可）" } do %>
  <%= form_with url: step3_message_path, method: :post do |f| %>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      <% @impressions.each do |impression| %>
        <%= render "messages/checkbox_card",
                   name: "impression_ids[]",
                   value: impression.id,
                   label: impression.name,
                   checked: @selected_ids.include?(impression.id) %>
      <% end %>
    </div>

    <div class="flex gap-4 pt-6">
      <%= link_to "戻る", step2_message_path, class: "flex-1 h-14 border-2 border-primary/20 text-primary rounded-xl font-bold text-lg flex items-center justify-center hover:bg-primary/5 transition-all" %>
      <button type="submit" class="flex-1 h-14 bg-primary text-white rounded-xl font-bold text-lg hover:shadow-[0_4px_20px_rgba(192,108,94,0.3)] transition-all">
        次へ進む
      </button>
    </div>
  <% end %>
<% end %>
